<?xml version="1.0" encoding="utf-8"?>
<templates>

    <t t-name="account.TaxTotalsField" owl="1">
        <table t-if="totals" class="oe_right">
            <tbody>
                <t t-foreach="totals.subtotals" t-as="subtotal" t-key="subtotal['name']">
                    <tr>
                        <td class="o_td_label">
                            <label class="o_form_label o_tax_total_label" t-esc="subtotal['name']"/>
                        </td>

                        <td>
                            <span t-att-name="subtotal['name']" style="white-space: nowrap; font-weight: bold;"
                                  t-out="subtotal['formatted_amount']"/>
                        </td>
                    </tr>

                    <t t-foreach="totals.groups_by_subtotal[subtotal['name']]" t-as="taxGroup"
                       t-key="taxGroup.group_key">
                        <TaxGroupComponent
                                currency="currency"
                                taxGroup="taxGroup"
                                isReadonly="readonly"
                                onChangeTaxGroup.bind="_onChangeTaxValueByTaxGroup"
                                invalidate.bind="invalidate"
                        />
                    </t>
                </t>
                <tr t-if="totals.guarantee_percentage_formatted">
                    <td class="o_td_label">
                        <label class="o_form_label o_tax_total_label">Retenue de garantie</label>
                    </td>
                    <td>
                        <span
                                t-out="totals.guarantee_percentage_formatted"
                                style="white-space: nowrap; font-size: 1em;"
                        />
                    </td>
                </tr>
                <tr t-if="totals.prime_amount_formatted">
                    <td class="o_td_label">
                        <label class="o_form_label o_tax_total_label">Montant CEE</label>
                    </td>
                    <td>
                        <span
                                t-out="totals.prime_amount_formatted"
                                style="white-space: nowrap; font-size: 1em;"
                        />
                    </td>
                </tr>

                <!-- Total amount with all taxes-->
                <tr>
                    <td class="o_td_label">
                        <label class="o_form_label o_tax_total_label">Total</label>
                    </td>

                    <td>
                        <span
                                name="amount_total"
                                t-att-class="Object.keys(totals.groups_by_subtotal).length > 0 ? 'oe_subtotal_footer_separator' : ''"
                                t-out="totals.formatted_amount_total"
                                t-attf-style="{{ !totals.formatted_amount_total_rounded ? 'font-size: 1.3em; font-weight: bold; white-space: nowrap;' : 'font-size: 1em;' }}"
                        />
                    </td>
                </tr>

                <tr t-if="totals.formatted_amount_total_rounded">
                    <td class="o_td_label">
                        <label class="o_form_label o_tax_total_label">Total Rounded</label>
                    </td>

                    <td>
                        <span
                                t-out="totals.formatted_amount_total_rounded"
                                style="white-space: nowrap; font-weight: bold; font-size: 1.3em;"
                        />
                    </td>
                </tr>
            </tbody>
        </table>
    </t>
</templates>
